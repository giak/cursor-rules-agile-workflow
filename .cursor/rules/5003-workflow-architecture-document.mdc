---
title: "Architecture Document Framework"
description: "GENERATE when DOCUMENTING system architecture to ENSURE comprehensive technical blueprint"
globs: "docs/architecture/*.md"
alwaysApply: false
tags: ["architecture", "documentation", "technical", "design"]
---

# ðŸ—ï¸ Architecture Document Framework

## Î£ Contextâ€¢Alignment [p=1]
- Architecture = technicalâ€¢blueprint(structure+patterns+interfaces)
- extendsâ€¢from(PFD+PRD) â†’ transformsâ€¢requirementsâ€¢intoâ€¢technicalâ€¢solutions
- document â†’ implementationâ€¢guide(developers+architects+maintainers)
- bridges(businessâ€¢requirements â‡Œ technicalâ€¢implementation)
- enables(consistentâ€¢development+qualityâ€¢assurance+evolution)
- supports(onboarding+maintenance+scalability)
- foundationâ€¢for(implementation+testing+futureâ€¢extensions)

## Î“ Documentâ€¢Relationships [p=1]

â†¹ documentationâ€¢hierarchy {
  position: PFD â†’ PRD â†’ Architecture â†’ implementation
  
  pfdâ€¢relationship: {
    consumes: vision+goals+constraints,
    transforms: highâ€¢levelâ€¢objectives â†’ technicalâ€¢approach,
    maintains: alignmentâ€¢withâ€¢businessâ€¢direction
  }
  
  prdâ€¢relationship: {
    consumes: functional+non-functionalâ€¢requirements,
    transforms: featureâ€¢requirements â†’ technicalâ€¢components,
    validates: technicalâ€¢feasibilityâ€¢ofâ€¢requirements
  }
  
  implementationâ€¢relationship: {
    guides: developmentâ€¢decisions+componentâ€¢interactions,
    defines: interfaces+patterns+dataâ€¢flows,
    establishes: technicalâ€¢standards+designâ€¢patterns
  }
  
  visualâ€¢representation: ```mermaid
    flowchart TB
      PFD[Project Foundation Document] --> PRD[Product Requirements Document]
      PFD --> ARCH[Architecture Document]
      PRD --> ARCH
      ARCH --> IMPL[Implementation]
      
      PFD -.-> |Vision & Constraints| ARCH
      PRD -.-> |Requirements| ARCH
      ARCH -.-> |Technical Decisions| IMPL
      IMPL -.-> |Feedback| ARCH
      
      subgraph Implementation
        CODE[Source Code]
        COMP[Components]
        TESTS[Test Cases]
        CI[CI/CD Pipeline]
      end
      
      ARCH --> CODE
      ARCH --> COMP
      ARCH --> TESTS
      ARCH --> CI
      
      classDef pfd fill:#ff9900,stroke:#333,stroke-width:2px
      classDef prd fill:#66cc99,stroke:#333,stroke-width:2px
      classDef arch fill:#6699ff,stroke:#333,stroke-width:2px
      classDef impl fill:#eeeeee,stroke:#333,stroke-width:1px
      
      class PFD pfd
      class PRD prd
      class ARCH arch
      class CODE,COMP,TESTS,CI impl
  ```
}

## Î©â‚ Documentâ€¢Structure [p=1]

â†¹ architectureâ€¢framework {
  format: markdownâ€¢professional
  organization: multiâ€¢levelâ€¢diagramâ€¢approach
  navigation: tableâ€¢ofâ€¢contents(linkedâ€¢sections)
  accessibility: technical+businessâ€¢stakeholders
  
  components: [
    frontmatter(metadata+version+status)
    â†’ introduction(context+purpose+scope)
    â†’ levelsâ€¢ofâ€¢abstraction(3-tierâ€¢approach)
    â†’ levelâ€¢1:context(system+users+externalâ€¢systems)
    â†’ levelâ€¢2:container(highâ€¢levelâ€¢components)
    â†’ levelâ€¢3:component(detailedâ€¢implementation)
    â†’ crossâ€¢cuttingâ€¢concerns(sharedâ€¢aspects+qualityâ€¢attributes)
    â†’ dataâ€¢flows(sequence+interactionâ€¢diagrams)
    â†’ technicalâ€¢decisions(patterns+frameworks+rationale)
    â†’ evolution(roadmap+technicalâ€¢debt+futureâ€¢directions)
    â†’ specializedâ€¢details(security+performance+accessibility)
    â†’ appendix(glossary+references+stackâ€¢details)
  ]
  
  visualâ€¢representation: ```mermaid
    graph TD
      subgraph Architecture[Architecture Document]
        direction TB
        FM[Frontmatter]
        INTRO[Introduction]
        LEVELS[Abstraction Levels]
        CTX[Level 1: Context]
        CONT[Level 2: Container]
        COMP[Level 3: Component]
        CROSS[Cross-Cutting Concerns]
        FLOW[Data Flows]
        DEC[Technical Decisions]
        EVOL[Evolution]
        SPEC[Specialized Details]
        APP[Appendix]
      end
      
      FM --> INTRO
      INTRO --> LEVELS
      LEVELS --> CTX
      CTX --> CONT
      CONT --> COMP
      COMP --> CROSS
      CROSS --> FLOW
      FLOW --> DEC
      DEC --> EVOL
      EVOL --> SPEC
      SPEC --> APP
      
      subgraph "Level Details"
        CTX1[System Context Diagram]
        CONT1[Container/Package Diagram]
        COMP1[Component Diagram]
        COMP2[Component Details]
      end
      
      CTX --- CTX1
      CONT --- CONT1
      COMP --- COMP1
      COMP --- COMP2
      
      classDef main fill:#f5f5f5,stroke:#333,stroke-width:1px
      classDef section fill:#ffffff,stroke:#333,stroke-width:1px
      classDef detail fill:#f0f0f0,stroke:#333,stroke-width:1px
      
      class FM,INTRO,LEVELS,CTX,CONT,COMP,CROSS,FLOW,DEC,EVOL,SPEC,APP main
      class CTX1,CONT1,COMP1,COMP2 detail
  ```
}

â†¹ metadataâ€¢requirements {
  elements: [
    title: systemâ€¢name+documentâ€¢type,
    version: semver+date,
    status: draft|review|approved,
    authors: names+roles,
    related_documents: referencesâ€¢toâ€¢pfd+prd
  ]
  
  schema: YAML|frontmatter
  placement: documentâ€¢start
  
  example: ```yaml
    ---
    title: "System Architecture - Customer Portal"
    version: "1.0.0"
    date: "2024-11-15"
    status: "Draft"
    authors: ["Architecture Team"]
    related_documents:
      - document_type: "PFD"
        path: ".ai/pfd.md"
        version: "1.3.0"
      - document_type: "PRD"
        path: ".ai/prd.md"
        version: "2.0.0"
    ---
  ```
}

## Î©â‚‚ Contentâ€¢Requirements [p=1]

â†¹ coreâ€¢sections [p=1] â†’ [
  âŠ• introduction {
    purpose: documentâ€¢objectives+intendedâ€¢audience,
    scope: systemâ€¢boundaries+includedâ€¢components,
    alignment: relationshipâ€¢toâ€¢pfd+prd
  }
  
  âŠ• levelsâ€¢ofâ€¢abstraction {
    approach: c4â€¢modelâ€¢inspired(context+container+component+code),
    rationale: progressiveâ€¢disclosureâ€¢ofâ€¢detail,
    navigation: howâ€¢toâ€¢readâ€¢theâ€¢document,
    structure: highâ€¢levelâ€¢overviewâ€¢ofâ€¢sections
  }
  
  âŠ• levelâ€¢1:context {
    purpose: systemâ€¢inâ€¢relationâ€¢toâ€¢users+externalâ€¢systems,
    diagram: contextâ€¢diagram(mermaidâ€¢flowchart|c4),
    elements: [
      users: primary+secondaryâ€¢users,
      externalâ€¢systems: integrations+dependencies,
      dataâ€¢flows: highâ€¢levelâ€¢exchanges
    ],
    elementâ€¢details: purpose+interactions+requirements
  }
  
  âŠ• levelâ€¢2:container {
    purpose: highâ€¢levelâ€¢components+packageâ€¢structure,
    diagram: containerâ€¢diagram(mermaidâ€¢flowchart),
    elements: [
      majorâ€¢components: modules+services+packages,
      interfaces: howâ€¢componentsâ€¢interact,
      technologicalâ€¢choices: keyâ€¢technologiesâ€¢perâ€¢component,
      dependencies: componentâ€¢relationships+direction
    ],
    elementâ€¢details: responsibility+technology+dependencies
  }
  
  âŠ• levelâ€¢3:component {
    purpose: detailedâ€¢internalâ€¢structureâ€¢ofâ€¢components,
    diagram: componentâ€¢diagram(mermaidâ€¢flowchart),
    elements: [
      subcomponents: classes+modules+functions,
      interfaces: publicâ€¢apis+contracts,
      dataâ€¢structures: keyâ€¢entities+objects,
      patterns: designâ€¢patterns+architecturalâ€¢patterns
    ],
    componentâ€¢details: [
      responsibility: specificâ€¢purpose+function,
      properties: mainâ€¢dataâ€¢elements,
      methods: keyâ€¢operations+behaviors,
      constraints: limitations+requirements,
      technicalâ€¢decisions: implementationâ€¢choices+rationale
    ]
  }
  
  âŠ• crossâ€¢cuttingâ€¢concerns {
    errorâ€¢handling: strategy+patterns+implementation,
    logging: approach+levels+storage,
    security: authentication+authorization+dataâ€¢protection,
    internationalization: languages+translationâ€¢approach,
    accessibility: standards+implementationâ€¢approach,
    configuration: environmentâ€¢variables+settings
  }
  
  âŠ• dataâ€¢flows {
    keyâ€¢scenarios: mainâ€¢useâ€¢cases+operations,
    sequenceâ€¢diagrams: stepâ€¢byâ€¢stepâ€¢interactions,
    stateâ€¢transitions: keyâ€¢stateâ€¢changes+triggers,
    errorâ€¢paths: exceptionâ€¢handling+recovery
  }
  
  âŠ• technicalâ€¢decisions {
    architectureâ€¢style: monolith|microservices|serverless,
    designâ€¢patterns: selectedâ€¢patterns+usage,
    frameworkâ€¢choices: selectedâ€¢frameworks+rationale,
    technicalâ€¢constraints: limitations+boundaries,
    integrationâ€¢approaches: apis+events+sharedâ€¢data
  }
  
  âŠ• evolution {
    technicalâ€¢debt: currentâ€¢issues+impact+remediation,
    roadmap: plannedâ€¢improvements+timeline,
    versionâ€¢strategy: compatibility+migration,
    futureâ€¢considerations: scalability+extensibility
  }
  
  âŠ• specializedâ€¢details {
    securityâ€¢architecture: defenseâ€¢inâ€¢depth+measures,
    performanceâ€¢considerations: optimization+metrics,
    scalingâ€¢strategy: horizontal+vertical+approach,
    mobileâ€¢considerations: responsive+platformâ€¢specific,
    accessibilityâ€¢implementation: WCAG+testing
  }
  
  âŠ• appendix {
    technologyâ€¢stack: detailedâ€¢versionâ€¢table,
    glossary: terms+acronyms+definitions,
    references: standards+patterns+inspiration,
    documentâ€¢history: versionâ€¢log+changes
  }
]

â†¹ architecturalâ€¢views [p=2] {
  contextâ€¢view: systemâ€¢boundaries+externalâ€¢entities,
  logicalâ€¢view: functionalâ€¢components+organization,
  processâ€¢view: runtimeâ€¢behavior+interactions,
  physicalâ€¢view: deployment+hardware+networks,
  developmentâ€¢view: codeâ€¢organization+modules
}

â†¹ diagramâ€¢requirements [p=1] {
  format: mermaidâ€¢preferred(flowchart+sequence+class),
  elements: clearlyâ€¢labeled+purposeâ€¢indicated,
  relationships: direction+typeâ€¢ofâ€¢interaction,
  styling: consistentâ€¢colors+shapes+formatting,
  
  visualâ€¢style: {
    colors: consistentâ€¢paletteâ€¢forâ€¢componentâ€¢types,
    shapes: appropriateâ€¢toâ€¢elementâ€¢type,
    text: clearâ€¢conciseâ€¢descriptive,
    layout: logicalâ€¢flow+minimizeâ€¢crossingâ€¢lines
  },
  
  diagramâ€¢types: [
    context: systemâ€¢andâ€¢externalâ€¢entities,
    container: highâ€¢levelâ€¢components,
    component: internalâ€¢structure,
    sequence: interactionâ€¢flows,
    state: stateâ€¢transitions,
    class: detailedâ€¢structure,
    entityâ€¢relationship: dataâ€¢models
  ],
  
  accessibility: textâ€¢explanationâ€¢accompanyingâ€¢eachâ€¢diagram
}

## Î¨ Verificationâ€¢Criteria [p=1]

â†¹ qualityâ€¢standards {
  completeness: allâ€¢requiredâ€¢sections+sufficientâ€¢detail,
  consistency: pfd+prd+technicalâ€¢implementation,
  clarity: unambiguous+precise+wellâ€¢organized,
  actionability: implementable+testable+specific,
  traceability: decisionsâ€¢linkedâ€¢toâ€¢requirements
}

â†¹ reviewâ€¢checklist [p=2] -> [
  âŠ• alignment {
    businessâ€¢goals: supportsâ€¢statedâ€¢objectivesâ€¢inâ€¢pfd,
    requirements: addressesâ€¢requirementsâ€¢inâ€¢prd,
    constraints: respectsâ€¢limitations+boundaries
  }
  
  âŠ• content {
    completeness: allâ€¢sectionsâ€¢properlyâ€¢detailed,
    clarity: diagrams+explanationsâ€¢areâ€¢understandable,
    depth: appropriateâ€¢levelâ€¢ofâ€¢technicalâ€¢detail,
    breadth: coversâ€¢allâ€¢systemâ€¢aspects
  }
  
  âŠ• technical {
    correctness: patterns+approachesâ€¢areâ€¢sound,
    consistency: technologies+terms+approaches,
    feasibility: implementationâ€¢isâ€¢realistic,
    maintainability: designâ€¢supportsâ€¢futureâ€¢changes
  }
  
  âŠ• diagrams {
    accuracy: correctlyâ€¢representsâ€¢theâ€¢system,
    readability: clear+wellâ€¢organized+labeled,
    consistency: notation+style+levelâ€¢ofâ€¢detail,
    completeness: coversâ€¢keyâ€¢aspects+interactions
  }
]

â†¹ architectureâ€¢challenges [p=2] {
  scalability: capacityâ€¢forâ€¢growth+performanceâ€¢underâ€¢load,
  security: protectionâ€¢fromâ€¢threats+vulnerabilityâ€¢mitigation,
  maintainability: easeâ€¢ofâ€¢change+understanding+fixing,
  performance: speed+efficiency+resourceâ€¢usage,
  reliability: faultâ€¢tolerance+recovery+availability,
  interoperability: compatibilityâ€¢withâ€¢otherâ€¢systems,
  extensibility: abilityâ€¢toâ€¢addâ€¢features+capabilities
}

â†¹ criticalâ€¢aspects [p=1] {
  âŠ• alignmentâ€¢withâ€¢requirements => architectureâ€¢clearlyâ€¢supportsâ€¢requirements
  âŠ• technicalâ€¢feasibility => architectureâ€¢canâ€¢beâ€¢implementedâ€¢withâ€¢availableâ€¢resources
  âŠ• appropriateâ€¢technologyâ€¢choices => selectedâ€¢technologiesâ€¢fitâ€¢theâ€¢needs
  âŠ• clearâ€¢componentâ€¢boundaries => wellâ€¢definedâ€¢interfaces+responsibilities
  âŠ• managementâ€¢ofâ€¢technicalâ€¢risks => identified+addressedâ€¢inâ€¢theâ€¢design
  âŠ• comprehensiveâ€¢diagrams => visualâ€¢representationâ€¢atâ€¢multipleâ€¢levels
  âŠ• explainedâ€¢technicalâ€¢decisions => rationaleâ€¢forâ€¢keyâ€¢choices
  âŠ• evolutionâ€¢path => clearâ€¢directionâ€¢forâ€¢futureâ€¢development
}

## Î› Architectureâ€¢Templates [p=2]

â†¹ 3-tierâ€¢architectureâ€¢template {
  presentationâ€¢layer: {
    components: uiâ€¢components+pages+layouts,
    stateâ€¢management: stores+stateâ€¢containers,
    routing: navigation+deepâ€¢linking,
    visualization: charts+graphs+reports
  },
  applicationâ€¢layer: {
    services: businessâ€¢logic+operations,
    controllers: requestâ€¢handling+orchestration,
    useâ€¢cases: businessâ€¢operations+workflows,
    validation: inputâ€¢validation+businessâ€¢rules
  },
  dataâ€¢layer: {
    repositories: dataâ€¢access+persistence,
    models: dataâ€¢structures+entities,
    storage: databases+files+caches,
    integration: externalâ€¢services+apis
  },
  crossâ€¢cutting: {
    authentication: identity+accessâ€¢control,
    logging: eventâ€¢recording+monitoring,
    errorâ€¢handling: exceptions+recovery,
    configuration: settings+environment
  }
}

â†¹ cleanâ€¢architectureâ€¢template {
  entities: {
    domainâ€¢objects: coreâ€¢businessâ€¢models,
    businessâ€¢rules: invariants+validations,
    valueâ€¢objects: immutableâ€¢values,
    domainâ€¢events: significantâ€¢stateâ€¢changes
  },
  useâ€¢cases: {
    interactors: applicationâ€¢specificâ€¢rules,
    inputâ€¢ports: useâ€¢caseâ€¢boundariesâ€¢inward,
    outputâ€¢ports: useâ€¢caseâ€¢boundariesâ€¢outward,
    domainâ€¢services: domainâ€¢specificâ€¢operations
  },
  interfaceâ€¢adapters: {
    controllers: inputâ€¢adaptation+routing,
    presenters: outputâ€¢formatting+adaptation,
    gateways: externalâ€¢systemâ€¢adaptation,
    repositories: persistenceâ€¢adaptation
  },
  frameworks: {
    ui: presentationâ€¢framework+components,
    web: server+clientâ€¢frameworks,
    persistence: database+orm+storage,
    external: thirdâ€¢partyâ€¢libraries+services
  }
}

â†¹ microservicesâ€¢template {
  serviceâ€¢boundaries: {
    domainâ€¢decomposition: boundedâ€¢contexts+domains,
    serviceâ€¢definition: purpose+responsibilities,
    apiâ€¢contracts: interfaces+operations+dataâ€¢formats,
    autonomy: independentâ€¢deployment+operation
  },
  interâ€¢serviceâ€¢communication: {
    synchronous: rest+grpc+graphql,
    asynchronous: messaging+events+queues,
    gateway: apiâ€¢aggregation+composition,
    discovery: serviceâ€¢registry+resolution
  },
  dataâ€¢management: {
    databaseâ€¢perâ€¢service: isolatedâ€¢persistence,
    dataâ€¢consistency: eventual+transactional,
    dataâ€¢sharing: replication+views+projections,
    queries: cqrs+materializedâ€¢views
  },
  operationalâ€¢aspects: {
    deployment: containers+orchestration,
    monitoring: health+metrics+logging,
    resilience: circuitâ€¢breakers+retries+fallbacks,
    scaling: horizontal+capacityâ€¢planning
  }
}

Î£ architectureâ€¢document = comprehensiveâ€¢technicalâ€¢blueprint âŠ• implementationâ€¢readyâ€¢specification 